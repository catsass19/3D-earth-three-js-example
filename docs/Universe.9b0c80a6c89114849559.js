(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n.p+"assets/fair_clouds_d1dce54.png"},38:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),r=n.n(o),i=n(21),l=n(36),c=n(30),s=n(31),d=n.n(s),h=n(33),u=n.n(h),p=n(34),f=n.n(p),w=n(35),m=Object(i.a)().translate([1024,512]).scale(325),b=function(e){var t=Object(w.a)("body").append("canvas").attr("width","2048px").attr("height","1024px"),n=t.node().getContext("2d");n.beginPath(),n.rect(-1,-1,t.node().width+1,t.node().height+1),n.fillStyle="#F5F5F5",n.fill();var a=Object(i.c)().projection(m).context(n);return n.strokeStyle="#ffffff",n.lineWidth=1,n.fillStyle="#CCC",n.beginPath(),a(e),n.fill(),n.stroke(),t},g=function(e,t,n){var a=e*(Math.PI/180),o=-t*(Math.PI/180);return{x:Math.cos(a)*Math.cos(o)*n,y:Math.sin(a)*n,z:Math.cos(a)*Math.sin(o)*n}},v=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},y=32,M=function(e,t,n){var a,o,r,l=e.lat,s=e.lon,d=t.lat,h=t.lon,u=g(l,s,n),p=g(d,h,n),f=new c.Vector3(u.x,u.y,u.z),w=new c.Vector3(p.x,p.y,p.z),m=(a=.5*f.distanceTo(w),r=10,a<=(o=5)?o:a>=r?r:a),b=Object(i.b)([s,l],[h,d]),v=b(.4),y=b(.7),M=g(v[1],v[0],n+m),x=g(y[1],y[0],n+m);return{start:u,end:p,spline:new c.CubicBezierCurve3(u,M,x,p)}},x=8,C=(Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,{Lhasa:{lat:29.652491,lon:91.172112},Vladivostok:{lat:43.10562,lon:131.87353},"Port Prince":{lat:18.5445,lon:-72.363},Taipei:{lat:25.105497,lon:121.597366},Chicago:{lat:41.881832,lon:-87.623177},Osaka:{lat:34.6525,lon:135.506302},"Abu Dhabi":{lat:24.466667,lon:54.366669},Dakar:{lat:14.6937,lon:-17.44406},Berlin:{lat:52.520008,lon:13.404954},Damascus:{lat:33.510414,lon:36.278336},Hawaii:{lat:21.289373,lon:-157.91748},Sydney:{lat:-33.865143,lon:151.2099},Bangalore:{lat:12.972442,lon:77.580643},Nairobi:{lat:-1.291514,lon:36.87426},"Mexico City":{lat:19.432608,lon:-99.133209},Istanbul:{lat:41.015137,lon:28.97953},"Salar de Uyuni":{lat:-20.266562,lon:-67.620552},Almaty:{lat:43.238949,lon:76.889709},Singapore:{lat:1.29027,lon:103.851959},Lima:{lat:-12.046374,lon:-77.042793},Cairo:{lat:31.2357116,lon:30.0444196},Catalonia:{lat:41.617592,lon:.620015},Alaska:{lat:66.160507,lon:-153.369141},"Puerto Rico":{lat:18.200178,lon:-66.664513},LA:{lat:34.052235,lon:-118.243683}}),P={flex:1,padding:"3px",display:"flex",flexDirection:"column"},j={flex:1,border:"1px solid #444",overflow:"hidden"},L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.satelliteControl={},t.resizeHandler=d()((function(){t.camera.aspect=t.content.clientWidth/t.content.clientHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(t.content.clientWidth,t.content.clientHeight)}),100),t.init=function(){t.scene=new c.Scene,t.camera=new c.PerspectiveCamera(30,null,.1,1e3),t.camera.position.set(40,5,20),t.camera.lookAt(new c.Vector3(0,0,0)),t.renderer=new c.WebGLRenderer({alpha:!0,antialias:!0}),t.control=new(u()(c))(t.camera,t.renderer.domElement),t.control.zoomSpeed=.2,t.renderer.render(t.scene,t.camera),t.renderer.setSize(t.content.clientWidth,t.content.clientHeight),t.content.appendChild(t.renderer.domElement),t.resizeHandler(),window.addEventListener("resize",t.resizeHandler),t.animate()},t.renderLight=function(){var e=new c.AmbientLight(16777215);t.scene.add(e)},t.renderGlobe=function(){var e=new c.MeshBasicMaterial({color:16777215});t.globe=new c.Mesh(new c.SphereGeometry(x,32,32),e),t.scene.add(t.globe)},t.animate=function(){t.control.update(),requestAnimationFrame(t.animate),t.globe&&(t.globe.rotation.y+=7e-4),t.renderer.render(t.scene,t.camera)},t.setContent=function(e){return t.content=e},t.loadLand=function(){return Object(a.a)(t,void 0,void 0,(function(){var e,t,n,o,r;return Object(a.c)(this,(function(a){switch(a.label){case 0:return[4,fetch("https://raw.githubusercontent.com/sghall/webgl-globes/master/data/world.json")];case 1:return[4,a.sent().json()];case 2:return e=a.sent(),t=Object(l.a)(e,e.objects.countries),n=b(t),(o=new c.Texture(n.node())).needsUpdate=!0,n.remove(),r=new c.MeshPhongMaterial({map:o}),this.globe.material=r,[2]}}))}))},t.loadCloud=function(){return Object(a.a)(t,void 0,void 0,(function(){var e,t,n;return Object(a.c)(this,(function(a){return e=new c.TextureLoader,"https://raw.githubusercontent.com/turban/webgl-earth/master/images/fair_clouds_4k.png",t=f.a,n=e.load(t),this.cloudLayer.material=new c.MeshPhongMaterial({map:n,color:14540253,transparent:!0,opacity:1}),[2]}))}))},t.addSatellite=function(e){var n=new c.Object3D,a=new c.BoxGeometry(1,2,1),o=new c.MeshBasicMaterial({color:"cyan",wireframe:!0}),r=new c.Mesh(a,o);r.position.y=e.radius;var i=new c.CircleGeometry(3,32);i.vertices.shift(),i.vertices.push(i.vertices[0].clone());var l=new c.Line(i,new c.LineDashedMaterial({color:"violet",opacity:.6,transparent:!0}));l.rotation.x=Math.PI/2,l.position.y=x-.3,n.add(l);var s=new c.SpotLight(new c.Color(65535),1);s.penumbra=.1,s.angle=1,s.castShadow=!0,r.add(s),n.add(r),n.rotation.x=e.rotation+Math.PI/2,n.rotation.z=e.startingPoint,t.satelliteControl[e.id]={pivot:n},t.scene.add(n)},t.loadCities=function(){Object.keys(C).forEach((function(e){var n=C[e],a=n.lat,o=n.lon,r=g(a,o,x),i=r.x,l=r.y,s=r.z,d=new c.MeshBasicMaterial({color:"#008888"}),h=new c.Mesh(new c.SphereGeometry(.1,8,8),d);h.position.set(i,l,s),t.globe.add(h)}));setInterval((function(){for(var e=Object.keys(C),n=v(0,e.length-1),a=v(0,e.length-1),o=new c.BufferGeometry,r=M(C[e[n]],C[e[a]],x).spline,i=new Float32Array(3*y),l=r.getPoints(y-1),s=0,d=0;s<l.length;s++){var h=l[s];i[d++]=h.x,i[d++]=h.y,i[d++]=h.z}o.addAttribute("position",new c.BufferAttribute(i,3));var u=new c.Line(o,new c.LineBasicMaterial({color:34952,opacity:1,transparent:!0}));t.globe.add(u);var p=0,f=function(){p<=y?(o.setDrawRange(0,p),p+=2,requestAnimationFrame(f)):setTimeout((function(){t.globe.remove(u)}),200)};f()}),300)},t}return Object(a.b)(t,e),t.prototype.componentDidMount=function(){this.init(),this.renderGlobe(),this.renderLight(),this.loadLand(),this.loadCities()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeHandler)},t.prototype.render=function(){return r.a.createElement("div",{style:P},r.a.createElement("div",{ref:this.setContent,style:j}))},t}(r.a.Component);t.default=L}}]);